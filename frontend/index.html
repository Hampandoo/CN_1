<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   

    <title>My First Web Page</title>
</head>
<body>
    <h1>Fetch result</h1>
    <p id="content">Title: Trump Threatens 100% Tariffs on BRICS Countries Over Currency Concerns\n\nMain Idea: President-elect Donald Trump has stated that countries in the BRICS group, backed by China and Russia, will face 100% tariffs if they attempt to create a new currency to replace the US dollar.\n\nKey Factors:\n\n- BRICS is a China and Russia-backed group of emerging economies.\n- Trump's threat aims to prevent countries from creating a new currency to replace the US dollar.\n- The US dollar is used by many countries, including some BRICS members, due to its widespread acceptance and stability.\n- The threat is seen as an attempt to maintain US global economic leadership and counter China's growing influence.\n- The BRICS group has been expanding, with new countries joining in recent years, and has been exploring the idea of creating a common currency.\n\nTags: useful information</p>
</body>
<script>
  const content = document.getElementById('content');
  const data_low = [{
    "content": "Next week, Warsaw will host the \"most important\" negotiations on the Russian Federation's war against Ukraine, Polish media reported, citing Polish Foreign Minister Radoslaw Sikorski. According to the Polish Foreign Minister, a meeting in the Weimar Triangle plus format will be held on November 19. \"It is in Warsaw that the most important negotiations on the war in Ukraine will take place. Next week I will hold a meeting in the Weimar Triangle plus format,\" Foreign Minister Radoslaw Sikorski said in Katowice on Friday. The meeting will be attended by representatives of Germany, Poland and France. Ukraine will be represented by Foreign Minister Andriy Sybiha. Kaja Kallas, who is to become the new High Representative of the European Union for Foreign and Security Policy, will also be present. When asked if he would talk to the Russian president himself, Sikorski replied that, firstly, he would tell him the same thing as the Russian representative to the UN Security Council: \"stop lying to the world and to yourself about this war.\" \"Secondly, that Russia has enough land and does not need to conquer the lands of its neighbors. And that he should withdraw his troops to Russia,\" Sikorski added.",
    "date": "18:02 25.01.2025",
    "id": 1027907,
    "title": "Meeting in Weimar Triangle plus format on Russia’s war against Ukraine scheduled for Nov 19 in Warsaw – Sikorski"
  }]

  let dataForGenerating = data_low;

  async function parse_news() {
    const news = await fetch('http://127.0.0.1:8000/parsers/parse', {
      method: 'POST',
      body: JSON.stringify(null)
    }).then(resp => resp.json())
    console.log(news)
  }
  
  async function get_parsed_news() {
    const news = await fetch('http://127.0.0.1:8000/parsers/parsed_news?page=1&page_size=10', {
      method: 'GET',
      headers: {
        "Content-Type": "application/json",
      }
    })
      .then(resp => resp.json());
    console.log("PARSED NEWS:", news)

    const generated_news = await fetch('http://127.0.0.1:8000/generators/generate', {
      method: 'POST',
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({news: news.items})
    })
    .then(resp => resp.json())
    .then(resp => {
      console.log('Generated')
      console.log(resp)
      return resp
    })
   }


   async function get_generated_news() {
    const generated_news = await fetch('http://127.0.0.1:8000/generators/generated_news?page=1&page_size=21', {
      method: 'GET',
      headers: {
        "Content-Type": "application/json",
      },
    })
    .then(resp => resp.json())
    .then(resp => {
      console.log('Generated')
      console.log(resp)
      return resp
    })
   }

  // parse_news()
  get_parsed_news()
  // get_generated_news()
</script>
</html>